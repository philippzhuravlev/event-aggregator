[0m[38;5;245mrunning 13 tests from ./functions/_shared/services/mail-service.test.ts[0m
createMailTransporter returns false when RESEND_API_KEY is missing ...
[0m[38;5;245m------- output -------[0m
{"severity":"WARNING","message":"Mail service not configured: RESEND_API_KEY not set","timestamp":"2025-11-16T21:45:48.569Z"}
[0m[38;5;245m----- output end -----[0m
createMailTransporter returns false when RESEND_API_KEY is missing ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
createMailTransporter returns false when RESEND_API_KEY has invalid format ...
[0m[38;5;245m------- output -------[0m
{"severity":"WARNING","message":"Invalid RESEND_API_KEY format (should start with 're_')","timestamp":"2025-11-16T21:45:48.570Z"}
[0m[38;5;245m----- output end -----[0m
createMailTransporter returns false when RESEND_API_KEY has invalid format ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
createMailTransporter returns true when RESEND_API_KEY is valid ...
[0m[38;5;245m------- output -------[0m
{"severity":"INFO","message":"Mail service initialized successfully","timestamp":"2025-11-16T21:45:48.570Z"}
[0m[38;5;245m----- output end -----[0m
createMailTransporter returns true when RESEND_API_KEY is valid ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendEmail returns error when RESEND_API_KEY is missing ...
[0m[38;5;245m------- output -------[0m
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:48.570Z"}
[0m[38;5;245m----- output end -----[0m
sendEmail returns error when RESEND_API_KEY is missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendEmail returns error when MAIL_FROM is missing ...
[0m[38;5;245m------- output -------[0m
{"severity":"WARNING","message":"Cannot send email - MAIL_FROM not configured","timestamp":"2025-11-16T21:45:48.571Z"}
[0m[38;5;245m----- output end -----[0m
sendEmail returns error when MAIL_FROM is missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendEmail sends email successfully ...
[0m[38;5;245m------- output -------[0m
{"severity":"INFO","message":"Email sent successfully","timestamp":"2025-11-16T21:45:48.572Z","to":"test@example.com","subject":"Test Subject"}
[0m[38;5;245m----- output end -----[0m
sendEmail sends email successfully ... [0m[32mok[0m [0m[38;5;245m(2ms)[0m
sendEmail handles API error response ...
[0m[38;5;245m------- output -------[0m
{"severity":"ERROR","message":"Email send failed","timestamp":"2025-11-16T21:45:48.573Z","status":400,"error":"API Error","to":"test@example.com"}
[0m[38;5;245m----- output end -----[0m
sendEmail handles API error response ... [0m[32mok[0m [0m[38;5;245m(9ms)[0m
sendEmail handles network errors ...
[0m[38;5;245m------- output -------[0m
{"severity":"ERROR","message":"Mail service error","timestamp":"2025-11-16T21:45:48.583Z","to":"test@example.com","error":{"message":"Network error","stack":"Error: Network error\n    at globalThis.fetch (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/mail-service.test.ts:186:13)\n    at sendEmail (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/mail-service.ts:64:28)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/mail-service.test.ts:189:26\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"Error"}}
[0m[38;5;245m----- output end -----[0m
sendEmail handles network errors ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendAlertEmail formats and sends alert email ...
[0m[38;5;245m------- output -------[0m
{"severity":"INFO","message":"Email sent successfully","timestamp":"2025-11-16T21:45:48.584Z","to":"admin@example.com","subject":"Test Alert"}
[0m[38;5;245m----- output end -----[0m
sendAlertEmail formats and sends alert email ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendTokenRefreshFailedAlert sends alert with correct format ...
[0m[38;5;245m------- output -------[0m
{"severity":"INFO","message":"Email sent successfully","timestamp":"2025-11-16T21:45:48.584Z","to":"alerts@example.com","subject":"Token Refresh Failed - Page 123"}
[0m[38;5;245m----- output end -----[0m
sendTokenRefreshFailedAlert sends alert with correct format ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendTokenRefreshFailedAlert uses default email when ALERT_EMAIL_TO is not set ...
[0m[38;5;245m------- output -------[0m
{"severity":"INFO","message":"Email sent successfully","timestamp":"2025-11-16T21:45:48.585Z","to":"admin@eventagg.dev","subject":"Token Refresh Failed - Page 123"}
[0m[38;5;245m----- output end -----[0m
sendTokenRefreshFailedAlert uses default email when ALERT_EMAIL_TO is not set ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendTokenExpiryWarning sends warning with correct format ...
[0m[38;5;245m------- output -------[0m
{"severity":"INFO","message":"Email sent successfully","timestamp":"2025-11-16T21:45:48.585Z","to":"alerts@example.com","subject":"Token Expiry Warning - Page 123 expires in 3 days"}
[0m[38;5;245m----- output end -----[0m
sendTokenExpiryWarning sends warning with correct format ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
sendEventSyncFailedAlert sends sync failure alert ...
[0m[38;5;245m------- output -------[0m
{"severity":"INFO","message":"Email sent successfully","timestamp":"2025-11-16T21:45:48.586Z","to":"alerts@example.com","subject":"Event Sync Failed"}
[0m[38;5;245m----- output end -----[0m
sendEventSyncFailedAlert sends sync failure alert ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 20 tests from ./functions/_shared/services/supabase-service.test.ts[0m
savePage saves page successfully ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Saved page in Supabase","timestamp":"2025-11-16T21:45:48.672Z","pageId":"123"}
[0m[38;5;245m----- post-test output end -----[0m
savePage saves page successfully ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
savePage throws error on database failure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to save page in Supabase","timestamp":"2025-11-16T21:45:48.673Z","pageId":"123","error":"[object Object]"}
[0m[38;5;245m----- post-test output end -----[0m
savePage throws error on database failure ... [0m[32mok[0m [0m[38;5;245m(10ms)[0m
saveEvent saves event successfully ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Saved event in Supabase","timestamp":"2025-11-16T21:45:48.684Z","eventId":"event1"}
[0m[38;5;245m----- post-test output end -----[0m
saveEvent saves event successfully ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
saveEvent throws error on database failure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to save event in Supabase","timestamp":"2025-11-16T21:45:48.684Z","eventId":"event1","error":"[object Object]"}
[0m[38;5;245m----- post-test output end -----[0m
saveEvent throws error on database failure ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
batchWriteEvents returns 0 for empty array ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
batchWriteEvents writes events successfully ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Wrote batch of events to Supabase","timestamp":"2025-11-16T21:45:48.686Z","batchSize":2}
[0m[38;5;245m----- post-test output end -----[0m
batchWriteEvents writes events successfully ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
batchWriteEvents throws error on database failure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to batch write events to Supabase","timestamp":"2025-11-16T21:45:48.687Z","batchSize":1,"error":"[object Object]"}
[0m[38;5;245m----- post-test output end -----[0m
batchWriteEvents throws error on database failure ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getActivePages returns empty array when no pages ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getActivePages returns pages successfully ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getActivePages returns empty array on query error ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:48.688Z","error":"[object Object]"}
[0m[38;5;245m----- post-test output end -----[0m
getActivePages returns empty array on query error ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
checkTokenExpiry returns expiring when token expiry is null ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
checkTokenExpiry returns expiring when query fails ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
checkTokenExpiry calculates expiry correctly ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
markTokenExpired marks token as expired successfully ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Marked token as expired in Supabase","timestamp":"2025-11-16T21:45:48.689Z","pageId":"123"}
[0m[38;5;245m----- post-test output end -----[0m
markTokenExpired marks token as expired successfully ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
markTokenExpired throws error on database failure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to mark token as expired in Supabase","timestamp":"2025-11-16T21:45:48.689Z","pageId":"123","error":"[object Object]"}
[0m[38;5;245m----- post-test output end -----[0m
markTokenExpired throws error on database failure ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
deleteOldEvents returns 0 for dry run with no events ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Dry run: would delete old events from Supabase","timestamp":"2025-11-16T21:45:48.690Z","eventsToDelete":0,"beforeDate":"2025-08-18T20:45:48.689Z"}
[0m[38;5;245m----- post-test output end -----[0m
deleteOldEvents returns 0 for dry run with no events ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
deleteOldEvents returns count for dry run ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Dry run: would delete old events from Supabase","timestamp":"2025-11-16T21:45:48.690Z","eventsToDelete":5,"beforeDate":"2025-08-18T20:45:48.690Z"}
[0m[38;5;245m----- post-test output end -----[0m
deleteOldEvents returns count for dry run ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
deleteOldEvents deletes events when not dry run ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Deleted old events from Supabase","timestamp":"2025-11-16T21:45:48.690Z","eventsDeleted":3}
[0m[38;5;245m----- post-test output end -----[0m
deleteOldEvents deletes events when not dry run ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
deleteOldEvents returns 0 when count query fails ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to count old events in Supabase","timestamp":"2025-11-16T21:45:48.690Z","error":"[object Object]"}
[0m[38;5;245m----- post-test output end -----[0m
deleteOldEvents returns 0 when count query fails ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
deleteOldEvents throws error when delete fails ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to delete old events from Supabase","timestamp":"2025-11-16T21:45:48.690Z","error":"[object Object]"}
{"severity":"ERROR","message":"Error deleting old events from Supabase","timestamp":"2025-11-16T21:45:48.691Z","error":{"message":"Failed to delete old events from Supabase: Delete failed","stack":"Error: Failed to delete old events from Supabase: Delete failed\n    at deleteOldEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/supabase-service.ts:277:13)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/supabase-service.test.ts:434:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
deleteOldEvents throws error when delete fails ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 7 tests from ./functions/cleanup-events/index.test.ts[0m
handleCleanupEvents returns 405 for non-POST requests ... [0m[32mok[0m [0m[38;5;245m(2ms)[0m
handleCleanupEvents handles OPTIONS for CORS ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleCleanupEvents returns 400 for invalid daysToKeep ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleCleanupEvents returns 500 when Supabase config is missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
cleanupOldEvents returns valid result structure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Starting event cleanup","timestamp":"2025-11-16T21:45:48.885Z","daysToKeep":90,"cutoffDate":"2025-08-18T20:45:48.885Z","dryRun":false}
{"severity":"ERROR","message":"Error deleting old events from Supabase","timestamp":"2025-11-16T21:45:48.886Z","error":{"message":"supabase.from(...).select(...).lt is not a function","stack":"TypeError: supabase.from(...).select(...).lt is not a function\n    at deleteOldEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/supabase-service.ts:248:8)\n    at cleanupOldEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/cleanup-events/index.ts:55:33)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/cleanup-events/index.test.ts:116:24\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"TypeError"}}
{"severity":"INFO","message":"Event cleanup completed","timestamp":"2025-11-16T21:45:48.886Z","eventsDeleted":0,"daysToKeep":90,"dryRun":false,"durationMs":1}
[0m[38;5;245m----- post-test output end -----[0m
cleanupOldEvents returns valid result structure ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
cleanupOldEvents respects dryRun parameter ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Starting event cleanup","timestamp":"2025-11-16T21:45:48.887Z","daysToKeep":90,"cutoffDate":"2025-08-18T20:45:48.887Z","dryRun":true}
{"severity":"ERROR","message":"Error deleting old events from Supabase","timestamp":"2025-11-16T21:45:48.887Z","error":{"message":"supabase.from(...).select(...).lt is not a function","stack":"TypeError: supabase.from(...).select(...).lt is not a function\n    at deleteOldEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/supabase-service.ts:248:8)\n    at cleanupOldEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/cleanup-events/index.ts:55:33)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/cleanup-events/index.test.ts:128:24\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"TypeError"}}
{"severity":"INFO","message":"Event cleanup completed","timestamp":"2025-11-16T21:45:48.887Z","eventsDeleted":0,"daysToKeep":90,"dryRun":true,"durationMs":0}
[0m[38;5;245m----- post-test output end -----[0m
cleanupOldEvents respects dryRun parameter ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
cleanupOldEvents uses default parameters ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Starting event cleanup","timestamp":"2025-11-16T21:45:48.887Z","daysToKeep":90,"cutoffDate":"2025-08-18T20:45:48.887Z","dryRun":false}
{"severity":"ERROR","message":"Error deleting old events from Supabase","timestamp":"2025-11-16T21:45:48.887Z","error":{"message":"supabase.from(...).select(...).lt is not a function","stack":"TypeError: supabase.from(...).select(...).lt is not a function\n    at deleteOldEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/supabase-service.ts:248:8)\n    at cleanupOldEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/cleanup-events/index.ts:55:33)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/cleanup-events/index.test.ts:135:24\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"TypeError"}}
{"severity":"INFO","message":"Event cleanup completed","timestamp":"2025-11-16T21:45:48.888Z","eventsDeleted":0,"daysToKeep":90,"dryRun":false,"durationMs":1}
[0m[38;5;245m----- post-test output end -----[0m
cleanupOldEvents uses default parameters ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 15 tests from ./functions/facebook-webhooks/helpers.test.ts[0m
shouldProcessEventType returns true for processed event types ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
shouldProcessEventType returns false for unprocessed event types ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
isWebhookRateLimited returns false for first request ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
isWebhookRateLimited returns true for rapid requests ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
normalizeWebhookChange handles create action ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
normalizeWebhookChange handles update action ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
normalizeWebhookChange handles delete action ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
normalizeWebhookChange extracts event ID from nested objects ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
normalizeWebhookChange uses default timestamp when missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
normalizeWebhookChange handles unknown verb ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
processWebhookChanges processes deleted events ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Deleted event from webhook change","timestamp":"2025-11-16T21:45:48.961Z","pageId":"123","eventId":"event123"}
[0m[38;5;245m----- post-test output end -----[0m
processWebhookChanges processes deleted events ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
processWebhookChanges skips unprocessed event types ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Skipping webhook event type","timestamp":"2025-11-16T21:45:48.962Z","eventType":"page","pageId":"123"}
[0m[38;5;245m----- post-test output end -----[0m
processWebhookChanges skips unprocessed event types ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
processWebhookChanges handles missing event ID ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Webhook change missing event id","timestamp":"2025-11-16T21:45:48.962Z","pageId":"123","valueKeys":["verb"]}
[0m[38;5;245m----- post-test output end -----[0m
processWebhookChanges handles missing event ID ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
processWebhookChanges handles delete errors ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Error processing webhook change","timestamp":"2025-11-16T21:45:48.962Z","pageId":"123","error":{"message":"Failed to delete event event123: Delete failed","stack":"Error: Failed to delete event event123: Delete failed\n    at processWebhookChanges (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/helpers.ts:230:17)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/helpers.test.ts:311:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
processWebhookChanges handles delete errors ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
processWebhookChanges handles processing errors ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Error processing webhook change","timestamp":"2025-11-16T21:45:48.963Z","pageId":"123","error":{"message":"Database error","stack":"Error: Database error\n    at Object.delete (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/helpers.test.ts:337:17)\n    at processWebhookChanges (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/helpers.ts:225:18)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/helpers.test.ts:354:24\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
processWebhookChanges handles processing errors ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 11 tests from ./functions/facebook-webhooks/index.test.ts[0m
handleWebhook returns 405 for unsupported methods ... [0m[32mok[0m [0m[38;5;245m(2ms)[0m
handleWebhookGet returns 400 for missing parameters ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Webhook subscription validation failed","timestamp":"2025-11-16T21:45:49.161Z","error":"Missing required webhook validation parameters"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookGet returns 400 for missing parameters ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleWebhookGet returns 403 for invalid verify token ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Webhook verify token mismatch","timestamp":"2025-11-16T21:45:49.162Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookGet returns 403 for invalid verify token ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleWebhookGet returns 200 for valid subscription ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Webhook subscription verified","timestamp":"2025-11-16T21:45:49.162Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookGet returns 200 for valid subscription ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleWebhookPost returns 401 for missing signature ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Missing webhook signature header","timestamp":"2025-11-16T21:45:49.163Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookPost returns 401 for missing signature ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleWebhookPost returns 400 for invalid JSON ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Failed to parse webhook payload","timestamp":"2025-11-16T21:45:49.166Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookPost returns 400 for invalid JSON ... [0m[32mok[0m [0m[38;5;245m(2ms)[0m
handleWebhookPost returns 400 for invalid payload structure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Invalid webhook payload","timestamp":"2025-11-16T21:45:49.166Z","error":"Missing 'object' field"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookPost returns 400 for invalid payload structure ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleWebhookPost returns 401 for invalid signature ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Invalid webhook signature","timestamp":"2025-11-16T21:45:49.167Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookPost returns 401 for invalid signature ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleWebhookPost returns 413 for oversized body ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Request body exceeds maximum size","timestamp":"2025-11-16T21:45:49.167Z","contentLength":200000,"maxAllowed":102400}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookPost returns 413 for oversized body ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleWebhookPost processes valid webhook payload ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to retrieve token from Supabase Vault","timestamp":"2025-11-16T21:45:49.169Z","pageId":"123","error":{"message":"supabase.from(...).select is not a function","stack":"TypeError: supabase.from(...).select is not a function\n    at getPageToken (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/vault-service.ts:137:8)\n    at resolveAccessToken (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/helpers.ts:188:31)\n    at processWebhookChanges (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/helpers.ts:243:33)\n    at handleWebhookPost (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/index.ts:203:30)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/index.test.ts:246:22\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"TypeError"}}
{"severity":"WARNING","message":"No access token found for page when processing webhook","timestamp":"2025-11-16T21:45:49.170Z","pageId":"123"}
{"severity":"INFO","message":"Webhook processing complete","timestamp":"2025-11-16T21:45:49.170Z","eventsProcessed":0,"eventsFailed":1}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookPost processes valid webhook payload ... [0m[32mok[0m [0m[38;5;245m(2ms)[0m
handleWebhookPost handles missing FACEBOOK_APP_SECRET ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Webhook handler error","timestamp":"2025-11-16T21:45:49.170Z","error":{"message":"Missing FACEBOOK_APP_SECRET","stack":"Error: Missing FACEBOOK_APP_SECRET\n    at handleWebhookPost (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/index.ts:110:13)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/facebook-webhooks/index.test.ts:269:28\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"Error"}}
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:49.171Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleWebhookPost handles missing FACEBOOK_APP_SECRET ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 15 tests from ./functions/get-events/index.test.ts[0m
handleGetEvents returns 405 for non-GET requests ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
handleGetEvents handles OPTIONS for CORS ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleGetEvents returns 500 when Supabase config is missing ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Missing Supabase environment variables","timestamp":"2025-11-16T21:45:49.326Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleGetEvents returns 500 when Supabase config is missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents returns valid structure with empty results ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.327Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.327Z","totalReturned":0,"hasMore":false}
[0m[38;5;245m----- post-test output end -----[0m
getEvents returns valid structure with empty results ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents handles events with valid data ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.327Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.327Z","totalReturned":1,"hasMore":false}
[0m[38;5;245m----- post-test output end -----[0m
getEvents handles events with valid data ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents respects limit parameter ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.328Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.329Z","totalReturned":50,"hasMore":true}
[0m[38;5;245m----- post-test output end -----[0m
getEvents respects limit parameter ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
getEvents handles pageToken parameter ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.329Z","limit":50,"pageToken":"MTc2MzQxNTk0OTMyOQ==","upcoming":true,"hasSearch":false}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.329Z","totalReturned":1,"hasMore":false}
[0m[38;5;245m----- post-test output end -----[0m
getEvents handles pageToken parameter ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents handles invalid pageToken ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.329Z","limit":50,"pageToken":"invalid-token","upcoming":true,"hasSearch":false}
{"severity":"WARNING","message":"Invalid page token provided","timestamp":"2025-11-16T21:45:49.330Z","pageToken":"invalid-token"}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.330Z","totalReturned":0,"hasMore":false}
[0m[38;5;245m----- post-test output end -----[0m
getEvents handles invalid pageToken ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents handles pageId filter ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.330Z","limit":50,"pageId":"123","upcoming":true,"hasSearch":false}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.330Z","totalReturned":1,"hasMore":false}
[0m[38;5;245m----- post-test output end -----[0m
getEvents handles pageId filter ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents handles search query ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.330Z","limit":50,"upcoming":true,"hasSearch":true}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.331Z","totalReturned":1,"hasMore":false}
[0m[38;5;245m----- post-test output end -----[0m
getEvents handles search query ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents handles events without start_time ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.331Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.331Z","totalReturned":0,"hasMore":false}
[0m[38;5;245m----- post-test output end -----[0m
getEvents handles events without start_time ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
getEvents generates nextPageToken when hasMore is true ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.331Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"DEBUG","message":"Events retrieved successfully","timestamp":"2025-11-16T21:45:49.332Z","totalReturned":50,"hasMore":true}
[0m[38;5;245m----- post-test output end -----[0m
getEvents generates nextPageToken when hasMore is true ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleGetEvents handles rate limiting ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.334Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.362Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.334Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.334Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.363Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.364Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.363Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.363Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.365Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.365Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.365Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.365Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.366Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.366Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.366Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.366Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.367Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.367Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.367Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.367Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.368Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.368Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.368Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.368Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.369Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.370Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.369Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.369Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.370Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.371Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.370Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.370Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.371Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.372Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.371Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.371Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.372Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.373Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.372Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.372Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.373Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.374Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.373Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.373Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.374Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.375Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.375Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.375Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.375Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.376Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.375Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.375Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.376Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.377Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.376Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.376Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.377Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.378Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.377Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.377Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.378Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.379Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.378Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.378Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.379Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.380Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.379Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.379Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.380Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.381Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.380Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.380Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.381Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.382Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.381Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.381Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.382Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.382Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.382Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.382Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.383Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.383Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.383Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.383Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.383Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.384Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.384Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.384Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.384Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.385Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.384Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.384Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.385Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.387Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.385Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.385Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.387Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.388Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.387Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.387Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.388Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.389Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.388Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.388Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.389Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.390Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.389Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.389Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.390Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.391Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.390Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.390Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.391Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.392Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.391Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.391Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.392Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.392Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.392Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.392Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.393Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.393Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.393Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.393Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.393Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.394Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.393Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.393Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.394Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.395Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.394Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.394Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.395Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.396Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.395Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.395Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.396Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.396Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.396Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.396Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.397Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.397Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.397Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.397Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.397Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.398Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.397Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.397Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.398Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.399Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.398Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.398Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.399Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.400Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.399Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.399Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.400Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.401Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.400Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.400Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.401Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.402Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.401Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.401Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.402Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.403Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.402Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.402Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.403Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.403Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.403Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.403Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.404Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.404Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.404Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.404Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.404Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.405Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.404Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.404Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.405Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.406Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.405Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.405Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.406Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.407Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.406Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.406Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.407Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.407Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.407Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.407Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.408Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.409Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.408Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.408Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.409Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.410Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.409Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.409Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.410Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.410Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.410Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.410Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.411Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.411Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.411Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.411Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:316:24\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
handleGetEvents handles rate limiting ... [0m[31mFAILED[0m [0m[38;5;245m(79ms)[0m
handleGetEvents handles invalid query parameters ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleGetEvents handles database errors ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"DEBUG","message":"Getting events with pagination","timestamp":"2025-11-16T21:45:49.412Z","limit":50,"upcoming":true,"hasSearch":false}
{"severity":"ERROR","message":"Failed to get events","timestamp":"2025-11-16T21:45:49.413Z","error":{"message":"Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.412Z): client error (Connect): dns error: No such host is known. (os error 11001)","stack":"Error: Failed to get events from Supabase: TypeError: error sending request for url (https://test.supabase.co/rest/v1/events?select=page_id%2Cevent_id%2Cevent_data%2Ccreated_at%2Cupdated_at&order=event_data-%3E%3Estart_time.asc%2Cevent_id.asc&limit=51&event_data-%3E%3Estart_time=gte.2025-11-16T21%3A45%3A49.412Z): client error (Connect): dns error: No such host is known. (os error 11001)\n    at getEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:180:11)\n    at eventLoopTick (ext:core/01_core.js:179:7)\n    at async handleGetEvents (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.ts:344:20)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/get-events/index.test.ts:362:22\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
handleGetEvents handles database errors ... [0m[31mFAILED[0m [0m[38;5;245m(1ms)[0m
[0m[38;5;245mrunning 5 tests from ./functions/health-check/index.test.ts[0m
handleHealthCheck returns 405 for non-GET requests ... [0m[32mok[0m [0m[38;5;245m(2ms)[0m
handleHealthCheck returns 503 when Supabase config is missing ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Missing Supabase configuration","timestamp":"2025-11-16T21:45:49.597Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleHealthCheck returns 503 when Supabase config is missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleHealthCheck returns valid response structure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to fetch pages for token monitoring","timestamp":"2025-11-16T21:45:49.605Z","error":"TypeError: error sending request for url (https://test.supabase.co/rest/v1/pages?select=page_id%2Ctoken_expiry%2Ctoken_status&token_status=eq.active): client error (Connect): dns error: No such host is known. (os error 11001)"}
{"severity":"INFO","message":"Health check completed","timestamp":"2025-11-16T21:45:49.605Z","status":"healthy","expiredTokens":0,"expiringTokens":0,"alertsSent":0}
[0m[38;5;245m----- post-test output end -----[0m
handleHealthCheck returns valid response structure ... [0m[31mFAILED[0m [0m[38;5;245m(7ms)[0m
performHealthCheck returns valid structure with healthy system ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"No active pages found for token monitoring","timestamp":"2025-11-16T21:45:49.606Z"}
[0m[38;5;245m----- post-test output end -----[0m
performHealthCheck returns valid structure with healthy system ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
performHealthCheck handles database errors ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Health check: Supabase connectivity failed","timestamp":"2025-11-16T21:45:49.606Z","error":"Database connection failed"}
{"severity":"ERROR","message":"Token monitoring failed","timestamp":"2025-11-16T21:45:49.606Z","error":{"message":"Database connection failed","stack":"Error: Database connection failed\n    at Object.eq (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/health-check/index.test.ts:22:36)\n    at monitorTokens (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/health-check/index.ts:89:8)\n    at performHealthCheck (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/health-check/index.ts:197:5)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/health-check/index.test.ts:184:24\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
performHealthCheck handles database errors ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 5 tests from ./functions/sync-events/helpers.test.ts[0m
syncSinglePage returns empty result when no token found ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to retrieve token from Supabase Vault","timestamp":"2025-11-16T21:45:49.677Z","pageId":"123","error":{"message":"supabase.from(...).select is not a function","stack":"TypeError: supabase.from(...).select is not a function\n    at getPageToken (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/vault-service.ts:137:8)\n    at syncSinglePage (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.ts:63:31)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.test.ts:106:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"TypeError"}}
{"severity":"ERROR","message":"No access token found for page","timestamp":"2025-11-16T21:45:49.678Z","pageId":"123","pageName":"Test Page"}
[0m[38;5;245m----- post-test output end -----[0m
syncSinglePage returns empty result when no token found ... [0m[32mok[0m [0m[38;5;245m(8ms)[0m
syncSinglePage collects expiring tokens ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Token expiring soon","timestamp":"2025-11-16T21:45:49.685Z","pageId":123,"pageName":"Test Page","daysUntilExpiry":3,"expiresAt":"2025-11-19T21:45:49.685Z"}
{"severity":"ERROR","message":"Failed to retrieve token from Supabase Vault","timestamp":"2025-11-16T21:45:49.685Z","pageId":"123","error":{"message":"supabase.from(...).select is not a function","stack":"TypeError: supabase.from(...).select is not a function\n    at getPageToken (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/vault-service.ts:137:8)\n    at syncSinglePage (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.ts:63:31)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.test.ts:139:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"TypeError"}}
{"severity":"ERROR","message":"No access token found for page","timestamp":"2025-11-16T21:45:49.686Z","pageId":"123","pageName":"Test Page"}
[0m[38;5;245m----- post-test output end -----[0m
syncSinglePage collects expiring tokens ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
syncSinglePage handles token expiry error from Facebook ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to retrieve token from Supabase Vault","timestamp":"2025-11-16T21:45:49.686Z","pageId":"123","error":{"message":"supabase.from(...).select is not a function","stack":"TypeError: supabase.from(...).select is not a function\n    at getPageToken (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/vault-service.ts:137:8)\n    at syncSinglePage (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.ts:63:31)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.test.ts:164:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"TypeError"}}
{"severity":"ERROR","message":"No access token found for page","timestamp":"2025-11-16T21:45:49.687Z","pageId":"123","pageName":"Test Page"}
[0m[38;5;245m----- post-test output end -----[0m
syncSinglePage handles token expiry error from Facebook ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
syncSinglePage processes events successfully ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Failed to retrieve token from Supabase Vault","timestamp":"2025-11-16T21:45:49.687Z","pageId":"123","error":{"message":"supabase.from(...).select is not a function","stack":"TypeError: supabase.from(...).select is not a function\n    at getPageToken (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/vault-service.ts:137:8)\n    at syncSinglePage (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.ts:63:31)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.test.ts:192:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"TypeError"}}
{"severity":"ERROR","message":"No access token found for page","timestamp":"2025-11-16T21:45:49.687Z","pageId":"123","pageName":"Test Page"}
[0m[38;5;245m----- post-test output end -----[0m
syncSinglePage processes events successfully ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
syncSinglePage handles processing errors ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Failed to check token expiry from Supabase","timestamp":"2025-11-16T21:45:49.687Z","pageId":"123","error":"[object Object]"}
{"severity":"WARNING","message":"Token expiring soon","timestamp":"2025-11-16T21:45:49.687Z","pageId":123,"pageName":"Test Page","daysUntilExpiry":0,"expiresAt":null}
{"severity":"ERROR","message":"Failed to retrieve token from Supabase Vault","timestamp":"2025-11-16T21:45:49.688Z","pageId":"123","error":{"message":"supabase.from(...).select is not a function","stack":"TypeError: supabase.from(...).select is not a function\n    at getPageToken (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/_shared/services/vault-service.ts:137:8)\n    at syncSinglePage (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.ts:63:31)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/sync-events/helpers.test.ts:215:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"TypeError"}}
{"severity":"ERROR","message":"No access token found for page","timestamp":"2025-11-16T21:45:49.688Z","pageId":"123","pageName":"Test Page"}
[0m[38;5;245m----- post-test output end -----[0m
syncSinglePage handles processing errors ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 8 tests from ./functions/sync-events/index.test.ts[0m
handleSyncEvents returns 405 for non-POST requests ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
handleSyncEvents handles OPTIONS for CORS ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleSyncEvents returns 401 for missing authorization ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Unauthorized sync-events request","timestamp":"2025-11-16T21:45:49.845Z","error":"Invalid or missing bearer token"}
[0m[38;5;245m----- post-test output end -----[0m
handleSyncEvents returns 401 for missing authorization ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleSyncEvents returns 500 when SYNC_TOKEN is missing ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Missing SYNC_TOKEN environment variable","timestamp":"2025-11-16T21:45:49.846Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleSyncEvents returns 500 when SYNC_TOKEN is missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
syncAllPageEvents returns valid structure with no pages ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.846Z"}
[0m[38;5;245m----- post-test output end -----[0m
syncAllPageEvents returns valid structure with no pages ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleSyncEvents handles rate limiting ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.849Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.853Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.853Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.853Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.854Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.855Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.855Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.855Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.856Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.857Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.857Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.857Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.857Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.858Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.858Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.858Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.858Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.859Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.859Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.859Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.860Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.860Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.860Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.860Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.860Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.861Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.861Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.861Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.861Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.862Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.862Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.862Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.862Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.863Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.863Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.863Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"INFO","message":"Manual sync started","timestamp":"2025-11-16T21:45:49.864Z"}
{"severity":"ERROR","message":"Failed to retrieve active pages from Supabase","timestamp":"2025-11-16T21:45:49.865Z","error":"[object Object]"}
{"severity":"INFO","message":"No active pages to sync","timestamp":"2025-11-16T21:45:49.865Z"}
{"severity":"INFO","message":"Manual sync completed successfully","timestamp":"2025-11-16T21:45:49.865Z","eventsAdded":0,"pagesProcessed":0,"errors":0}
{"severity":"WARNING","message":"Sync endpoint rate limit exceeded for token: test-sync-token","timestamp":"2025-11-16T21:45:49.865Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleSyncEvents handles rate limiting ... [0m[31mFAILED[0m [0m[38;5;245m(18ms)[0m
handleSyncEvents handles invalid bearer token ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"WARNING","message":"Unauthorized sync-events request","timestamp":"2025-11-16T21:45:49.865Z","error":"Invalid or missing bearer token"}
[0m[38;5;245m----- post-test output end -----[0m
handleSyncEvents handles invalid bearer token ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleSyncEvents handles missing Supabase config ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
[0m[38;5;245mrunning 12 tests from ./functions/token-refresh/index.test.ts[0m
refreshExpiredTokens returns empty result when no pages need refresh ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"No active pages found for token refresh","timestamp":"2025-11-16T21:45:50.055Z"}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens returns empty result when no pages need refresh ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
refreshExpiredTokens handles pages with no token expiry ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.056Z"}
{"severity":"WARNING","message":"Missing token expiry metadata","timestamp":"2025-11-16T21:45:50.056Z","pageId":"123","reason":"Missing token expiry metadata"}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.056Z","refreshedCount":0,"failedCount":1}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles pages with no token expiry ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
refreshExpiredTokens handles database query errors ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Token refresh job failed","timestamp":"2025-11-16T21:45:50.056Z","error":{"message":"Failed to fetch pages: Query failed","stack":"Error: Failed to fetch pages: Query failed\n    at refreshExpiredTokens (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.ts:117:13)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.test.ts:95:5\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles database query errors ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
refreshExpiredTokens handles missing token data ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.057Z"}
{"severity":"WARNING","message":"No stored token found","timestamp":"2025-11-16T21:45:50.057Z","pageId":"123","reason":"No stored token found"}
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:50.057Z"}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.057Z","refreshedCount":0,"failedCount":1}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles missing token data ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleTokenRefresh returns 405 for non-POST requests ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
handleTokenRefresh returns 500 when Supabase config is missing ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"ERROR","message":"Token refresh handler error","timestamp":"2025-11-16T21:45:50.059Z","error":{"message":"Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY","stack":"Error: Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY\n    at handleTokenRefresh (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.ts:322:13)\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.test.ts:154:28\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"Error"}}
[0m[38;5;245m----- post-test output end -----[0m
handleTokenRefresh returns 500 when Supabase config is missing ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
handleTokenRefresh returns valid response structure ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"No active pages found for token refresh","timestamp":"2025-11-16T21:45:50.059Z"}
[0m[38;5;245m----- post-test output end -----[0m
handleTokenRefresh returns valid response structure ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
refreshExpiredTokens handles token that expires in more than 7 days ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.060Z"}
{"severity":"DEBUG","message":"Token for page 123 not expiring soon","timestamp":"2025-11-16T21:45:50.060Z","daysUntilExpiry":10}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.060Z","refreshedCount":0,"failedCount":0}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles token that expires in more than 7 days ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
refreshExpiredTokens handles token that expires within 7 days ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.060Z"}
{"severity":"INFO","message":"Refreshing token for page 123","timestamp":"2025-11-16T21:45:50.060Z","daysUntilExpiry":5}
{"severity":"ERROR","message":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","timestamp":"2025-11-16T21:45:50.060Z","pageId":"123","reason":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","error":{"message":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","stack":"Error: Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET\n    at refreshExpiredTokens (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.ts:223:19)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.test.ts:224:18\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:50.060Z"}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.060Z","refreshedCount":0,"failedCount":1}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles token that expires within 7 days ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
refreshExpiredTokens handles already expired token ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.061Z"}
{"severity":"WARNING","message":"Token already expired","timestamp":"2025-11-16T21:45:50.061Z","pageId":"123","reason":"Token already expired"}
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:50.061Z"}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.061Z","refreshedCount":0,"failedCount":1}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles already expired token ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
refreshExpiredTokens handles RPC errors when getting token ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.061Z"}
{"severity":"ERROR","message":"Failed to read existing token","timestamp":"2025-11-16T21:45:50.061Z","pageId":"123","reason":"Failed to read existing token","error":{"message":"RPC failed","stack":"Error: RPC failed\n    at file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.test.ts:267:15\n    at innerWrapped (ext:cli/40_test.js:181:11)\n    at exitSanitizer (ext:cli/40_test.js:97:33)\n    at outerWrapped (ext:cli/40_test.js:124:20)","name":"Error"}}
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:50.061Z"}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.061Z","refreshedCount":0,"failedCount":1}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles RPC errors when getting token ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
refreshExpiredTokens handles rate limiting ...
[0m[38;5;245m------- post-test output -------[0m
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.061Z"}
{"severity":"INFO","message":"Refreshing token for page 123","timestamp":"2025-11-16T21:45:50.062Z","daysUntilExpiry":5}
{"severity":"ERROR","message":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","timestamp":"2025-11-16T21:45:50.062Z","pageId":"123","reason":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","error":{"message":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","stack":"Error: Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET\n    at refreshExpiredTokens (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.ts:223:19)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.test.ts:293:19\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:50.062Z"}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.062Z","refreshedCount":0,"failedCount":1}
{"severity":"INFO","message":"Found 1 active pages - checking token expiry","timestamp":"2025-11-16T21:45:50.062Z"}
{"severity":"INFO","message":"Refreshing token for page 123","timestamp":"2025-11-16T21:45:50.062Z","daysUntilExpiry":5}
{"severity":"ERROR","message":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","timestamp":"2025-11-16T21:45:50.062Z","pageId":"123","reason":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","error":{"message":"Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET","stack":"Error: Missing FACEBOOK_APP_ID or FACEBOOK_APP_SECRET\n    at refreshExpiredTokens (file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.ts:223:19)\n    at async file:///C:/Users/zhura_0pw5sm1/Documents/GitHub/event-aggregator/supabase/functions/token-refresh/index.test.ts:294:19\n    at async innerWrapped (ext:cli/40_test.js:181:5)\n    at async exitSanitizer (ext:cli/40_test.js:97:27)\n    at async outerWrapped (ext:cli/40_test.js:124:14)","name":"Error"}}
{"severity":"WARNING","message":"Cannot send email - RESEND_API_KEY not configured","timestamp":"2025-11-16T21:45:50.062Z"}
{"severity":"INFO","message":"Token refresh sweep finished","timestamp":"2025-11-16T21:45:50.062Z","refreshedCount":0,"failedCount":1}
[0m[38;5;245m----- post-test output end -----[0m
refreshExpiredTokens handles rate limiting ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m

[0m[1m[37m[41m ERRORS [0m

handleGetEvents handles rate limiting [0m[38;5;245m=> ./functions/get-events/index.test.ts:304:6[0m
[0m[1m[31merror[0m: Leaks detected:
  - 52 intervals were started in this test, but never completed. This is often caused by not calling `clearInterval`.
To get more details where leaks occurred, run again with the --trace-leaks flag.

handleGetEvents handles database errors [0m[38;5;245m=> ./functions/get-events/index.test.ts:353:6[0m
[0m[1m[31merror[0m: Leaks detected:
  - An interval was started in this test, but never completed. This is often caused by not calling `clearInterval`.
To get more details where leaks occurred, run again with the --trace-leaks flag.

handleHealthCheck returns valid response structure [0m[38;5;245m=> ./functions/health-check/index.test.ts:115:6[0m
[0m[1m[31merror[0m: Leaks detected:
  - An interval was started in this test, but never completed. This is often caused by not calling `clearInterval`.
To get more details where leaks occurred, run again with the --trace-leaks flag.

handleSyncEvents handles rate limiting [0m[38;5;245m=> ./functions/sync-events/index.test.ts:126:6[0m
[0m[1m[31merror[0m: Leaks detected:
  - 10 intervals were started in this test, but never completed. This is often caused by not calling `clearInterval`.
To get more details where leaks occurred, run again with the --trace-leaks flag.

[0m[1m[37m[41m FAILURES [0m

handleGetEvents handles rate limiting [0m[38;5;245m=> ./functions/get-events/index.test.ts:304:6[0m
handleGetEvents handles database errors [0m[38;5;245m=> ./functions/get-events/index.test.ts:353:6[0m
handleHealthCheck returns valid response structure [0m[38;5;245m=> ./functions/health-check/index.test.ts:115:6[0m
handleSyncEvents handles rate limiting [0m[38;5;245m=> ./functions/sync-events/index.test.ts:126:6[0m

[0m[31mFAILED[0m | 107 passed | 4 failed [0m[38;5;245m(1s)[0m

error: Test failed
